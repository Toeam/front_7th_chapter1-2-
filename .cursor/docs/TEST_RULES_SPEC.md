# í…ŒìŠ¤íŠ¸ ê·œì¹™ ëª…ì„¸ (Test Rules Specification)

## ğŸ“‹ ëª…ì„¸ì˜ ëª©ì 

ì´ ë¬¸ì„œëŠ” **í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± ê·œì¹™**ì„ ì •ì˜í•©ë‹ˆë‹¤. ëª¨ë“  íŒ€ì›ì´ ë™ì¼í•œ ê¸°ì¤€ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ì—¬ ì¼ê´€ì„± ìˆëŠ” ì½”ë“œë¥¼ ìœ ì§€í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

### ì´ ëª…ì„¸ì„œì˜ ëª©í‘œ

1. **ëª…í™•í•œ ê·œì¹™**: ë¬´ì—‡ì„ í…ŒìŠ¤íŠ¸í•´ì•¼ í•˜ê³ , ì–´ë–»ê²Œ ì‘ì„±í•´ì•¼ í•˜ëŠ”ì§€ ëª…í™•íˆ ì œì‹œ
2. **ì¼ê´€ì„±**: ëª¨ë“  íŒ€ì›ì´ ê°™ì€ íŒ¨í„´ê³¼ ì›ì¹™ì„ ë”°ë¥¼ ìˆ˜ ìˆë„ë¡
3. **ì‹¤ìš©ì„±**: ì‹¤ì œ í…ŒìŠ¤íŠ¸ ì‘ì„± ì‹œ ì¦‰ì‹œ í™œìš© ê°€ëŠ¥í•œ êµ¬ì²´ì  ê°€ì´ë“œ
4. **í•™ìŠµì„±**: ì´ˆë³´ìë„ ë”°ë¼í•  ìˆ˜ ìˆëŠ” ë‹¨ê³„ë³„ ì„¤ëª…

## 1. í…ŒìŠ¤íŠ¸ ì‘ì„± ì›ì¹™

> **ì™œ ì›ì¹™ì´ í•„ìš”í•œê°€?**  
> ì¼ê´€ëœ ì›ì¹™ì„ ë”°ë¥´ë©´ í…ŒìŠ¤íŠ¸ë¥¼ ì½ê³  ì´í•´í•˜ëŠ” ê²ƒì´ ì‰¬ì›Œì§‘ë‹ˆë‹¤. ëˆ„ê°€ ì‘ì„±í–ˆë“  ê°™ì€ íŒ¨í„´ì„ ë”°ë¼ê°€ë©´ ì „ì²´ íë¦„ì„ ë¹ ë¥´ê²Œ íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### **ì›ì¹™ 1: í…ŒìŠ¤íŠ¸ êµ¬ì¡° íŒ¨í„´**

í”„ë¡œì íŠ¸ì—ì„œëŠ” **AAA (Arrange-Act-Assert)** íŒ¨í„´ê³¼ **Given-When-Then** íŒ¨í„´ì´ ëª¨ë‘ ì‚¬ìš©ë©ë‹ˆë‹¤.

**ì™œ ë‘ íŒ¨í„´ì„ ì„ íƒí–ˆëŠ”ê°€?**
- ê° íŒ¨í„´ì€ ë‹¤ë¥¸ ìƒí™©ì— ìµœì í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤
- ì ì ˆí•œ íŒ¨í„´ì„ ì„ íƒí•˜ë©´ í…ŒìŠ¤íŠ¸ ì˜ë„ê°€ ëª…í™•í•´ì§‘ë‹ˆë‹¤
- ê°™ì€ íŒ¨í„´ìœ¼ë¡œ ì‘ì„±ë˜ë©´ ì½”ë“œ ë¦¬ë·°ì™€ ìœ ì§€ë³´ìˆ˜ê°€ ì‰¬ì›Œì§‘ë‹ˆë‹¤

##### **AAA (Arrange-Act-Assert) íŒ¨í„´**

ìˆœìˆ˜ í•¨ìˆ˜ë‚˜ ê°„ë‹¨í•œ í•¨ìˆ˜ í˜¸ì¶œ í…ŒìŠ¤íŠ¸ì— ì‚¬ìš©ë©ë‹ˆë‹¤.

```typescript
it('ì‹œì‘ ì‹œê°„ì´ ì¢…ë£Œ ì‹œê°„ë³´ë‹¤ ëŠ¦ì„ ë•Œ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•œë‹¤', () => {
  // Arrange: í…ŒìŠ¤íŠ¸ ì…ë ¥ ì¤€ë¹„
  const result = getTimeErrorMessage('14:00', '13:00');
  
  // Act: (í•¨ìˆ˜ í˜¸ì¶œì€ ì´ë¯¸ í¬í•¨ë¨)
  
  // Assert: ê²°ê³¼ ê²€ì¦
  expect(result).toEqual({
    startTimeError: 'ì‹œì‘ ì‹œê°„ì€ ì¢…ë£Œ ì‹œê°„ë³´ë‹¤ ë¹¨ë¼ì•¼ í•©ë‹ˆë‹¤.',
    endTimeError: 'ì¢…ë£Œ ì‹œê°„ì€ ì‹œì‘ ì‹œê°„ë³´ë‹¤ ëŠ¦ì–´ì•¼ í•©ë‹ˆë‹¤.',
  });
});
```

**AAA íŒ¨í„´ì´ ì‚¬ìš©ë˜ëŠ” ê²½ìš°:**
- âœ… ìˆœìˆ˜ í•¨ìˆ˜ í…ŒìŠ¤íŠ¸ (utils í•¨ìˆ˜)
- âœ… ë‹¨ì¼ í•¨ìˆ˜ í˜¸ì¶œ í…ŒìŠ¤íŠ¸
- âœ… ë³µì¡í•œ ìƒíƒœ ë³€ê²½ì´ ì—†ëŠ” ê²½ìš°

##### **Given-When-Then íŒ¨í„´**

ìƒíƒœë¥¼ ë³€ê²½í•˜ê±°ë‚˜ ë¹„ë™ê¸° ì‘ì—…ì´ í¬í•¨ëœ í…ŒìŠ¤íŠ¸ì— ì‚¬ìš©ë©ë‹ˆë‹¤.

```typescript
it('ê²€ìƒ‰ì–´ì— ë§ëŠ” ì´ë²¤íŠ¸ë§Œ í•„í„°ë§í•´ì•¼ í•œë‹¤', () => {
  // Given: ì´ˆê¸° ë°ì´í„° ì„¤ì •
  const mockEvents: Event[] = [/* ... */];
  
  // When: í…ŒìŠ¤íŠ¸ ëŒ€ìƒ ì‹¤í–‰
  act(() => {
    result.current.setSearchTerm('íšŒì˜');
  });
  
  // Then: ê²°ê³¼ ê²€ì¦
  expect(result.current.filteredEvents).toEqual([/* ... */]);
});
```

**Given-When-Then íŒ¨í„´ì´ ì‚¬ìš©ë˜ëŠ” ê²½ìš°:**
- âœ… React Hooks í…ŒìŠ¤íŠ¸
- âœ… ë¹„ë™ê¸° ì‘ì—… í…ŒìŠ¤íŠ¸
- âœ… ìƒíƒœ ë³€ê²½ì´ ìˆëŠ” í…ŒìŠ¤íŠ¸
- âœ… í†µí•© í…ŒìŠ¤íŠ¸

---

#### **ì›ì¹™ 2: ëª…í™•í•œ í…ŒìŠ¤íŠ¸ ì´ë¦„**

**ì™œ í•œê¸€ ì´ë¦„ì„ ì‚¬ìš©í•˜ëŠ”ê°€?**
- ìš°ë¦¬ íŒ€ì˜ ê³µí†µ ì–¸ì–´ë¡œ ì˜ì‚¬ì†Œí†µì˜ ì¥ë²½ì„ ì¤„ì…ë‹ˆë‹¤
- í…ŒìŠ¤íŠ¸ ëª©ì ì„ ì¦‰ì‹œ ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë‹¤ë£¨ëŠ” í…ŒìŠ¤íŠ¸ëŠ” ë„ë©”ì¸ ìš©ì–´ë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•´ ë”ìš± ëª…í™•í•©ë‹ˆë‹¤

í…ŒìŠ¤íŠ¸ ì´ë¦„ì€ **í•œê¸€ë¡œ ì‘ì„±**í•˜ë©°, "ë¬´ì—‡ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ”ì§€" ëª…í™•í•˜ê²Œ í‘œí˜„í•©ë‹ˆë‹¤.

**ì¢‹ì€ ì˜ˆ:**
```typescript
it('ì‹œì‘ ì‹œê°„ì´ ì¢…ë£Œ ì‹œê°„ë³´ë‹¤ ëŠ¦ì„ ë•Œ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•œë‹¤', () => {
  // ...
});
```

**ë‚˜ìœ ì˜ˆ:**
```typescript
it('should return error', () => {
  // ...
});
```

#### **ì›ì¹™ 3: ë‹¨ì¼ ì±…ì„**

**ì™œ í•œ í…ŒìŠ¤íŠ¸ì— í•˜ë‚˜ë§Œ ê²€ì¦í•˜ëŠ”ê°€?**
- í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í–ˆì„ ë•Œ ì›ì¸ì„ ì¦‰ì‹œ íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
- ê° í…ŒìŠ¤íŠ¸ê°€ ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰ë˜ì–´ ìœ ì§€ë³´ìˆ˜ê°€ ì‰½ìŠµë‹ˆë‹¤
- ì´ë¦„ë§Œ ë´ë„ ë¬´ì—‡ì´ ë¬¸ì œì¸ì§€ ë°”ë¡œ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤

í•œ í…ŒìŠ¤íŠ¸ëŠ” í•˜ë‚˜ì˜ ê¸°ëŠ¥ë§Œ ê²€ì¦í•©ë‹ˆë‹¤.

```typescript
// ì¢‹ì€ ì˜ˆ: ê° í…ŒìŠ¤íŠ¸ê°€ ë…ë¦½ì 
it('ê²€ìƒ‰ì–´ê°€ ë¹„ì–´ìˆì„ ë•Œ ëª¨ë“  ì´ë²¤íŠ¸ë¥¼ ë°˜í™˜í•´ì•¼ í•œë‹¤', () => { /* ... */ });
it('ê²€ìƒ‰ì–´ì— ë§ëŠ” ì´ë²¤íŠ¸ë§Œ í•„í„°ë§í•´ì•¼ í•œë‹¤', () => { /* ... */ });
```

#### **ì›ì¹™ 4: ê²©ë¦¬ëœ í…ŒìŠ¤íŠ¸**

**ì™œ í…ŒìŠ¤íŠ¸ë¥¼ ê²©ë¦¬í•´ì•¼ í•˜ëŠ”ê°€?**
- í…ŒìŠ¤íŠ¸ ìˆœì„œì— ì˜ì¡´í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤
- ë³‘ë ¬ ì‹¤í–‰ì´ ì•ˆì „í•©ë‹ˆë‹¤
- ì–´ë–¤ í…ŒìŠ¤íŠ¸ë¥¼ ë¨¼ì € ì‹¤í–‰í•´ë„ ê°™ì€ ê²°ê³¼ë¥¼ ë³´ì¥í•©ë‹ˆë‹¤
- ì‹¤íŒ¨í•œ í…ŒìŠ¤íŠ¸ê°€ ë‹¤ë¥¸ í…ŒìŠ¤íŠ¸ë¥¼ ë§ê°€ëœ¨ë¦¬ì§€ ì•ŠìŠµë‹ˆë‹¤

í…ŒìŠ¤íŠ¸ ê°„ ìƒí˜¸ ì˜í–¥ì´ ì—†ë„ë¡ ì‘ì„±í•©ë‹ˆë‹¤.

```typescript
beforeEach(() => {
  // ê° í…ŒìŠ¤íŠ¸ ì „ì— ì´ˆê¸°í™”
  server.resetHandlers();
});

afterEach(() => {
  // ê° í…ŒìŠ¤íŠ¸ í›„ì— ì •ë¦¬
  vi.clearAllTimers();
});
```

---

## 2. í…ŒìŠ¤íŠ¸ ìœ í˜•ë³„ ëª…ì„¸

#### **A. ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ í…ŒìŠ¤íŠ¸ - AAA íŒ¨í„´ ì‚¬ìš©**

ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ í…ŒìŠ¤íŠ¸ëŠ” **AAA (Arrange-Act-Assert) íŒ¨í„´**ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

##### **A-1. dateUtils í…ŒìŠ¤íŠ¸**
```typescript
describe('formatMonth', () => {
  it("2025ë…„ 7ì›” 10ì¼ì„ '2025ë…„ 7ì›”'ë¡œ ë°˜í™˜í•œë‹¤", () => {
    // Arrange: ì…ë ¥ ì¤€ë¹„
    const date = new Date('2025-07-10');
    
    // Act: í•¨ìˆ˜ í˜¸ì¶œ
    const result = formatMonth(date);
    
    // Assert: ê²°ê³¼ ê²€ì¦
    expect(result).toBe('2025ë…„ 7ì›”');
  });
});
```

**í•µì‹¬ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤:**
- âœ… ë‹¤ì–‘í•œ ë‚ ì§œ í¬ë§·íŒ… í…ŒìŠ¤íŠ¸
- âœ… ìœ¤ë…„/í‰ë…„ ì²˜ë¦¬
- âœ… ì›”ì˜ ì²«ë‚ /ë§ˆì§€ë§‰ë‚  ì²˜ë¦¬
- âœ… ë‚ ì§œ ë²”ìœ„ ê²€ì¦
- âœ… ê²½ê³„ê°’ í…ŒìŠ¤íŠ¸

##### **A-2. eventUtils í…ŒìŠ¤íŠ¸**
```typescript
describe('getFilteredEvents', () => {
  it("ê²€ìƒ‰ì–´ 'ì´ë²¤íŠ¸ 2'ì— ë§ëŠ” ì´ë²¤íŠ¸ë§Œ ë°˜í™˜í•œë‹¤", () => {
    // Arrange: ì…ë ¥ ë°ì´í„° ì¤€ë¹„
    const events: Event[] = [/* ... */];
    
    // Act: í•¨ìˆ˜ í˜¸ì¶œ
    const result = getFilteredEvents(events, 'ì´ë²¤íŠ¸ 2', new Date('2025-07-01'), 'month');
    
    // Assert: ê²°ê³¼ ê²€ì¦
    expect(result).toHaveLength(1);
    expect(result[0].title).toBe('ì´ë²¤íŠ¸ 2');
  });
});
```

**í•µì‹¬ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤:**
- âœ… ê²€ìƒ‰ì–´ë¡œ í•„í„°ë§
- âœ… ì£¼ê°„/ì›”ê°„ ë·°ë³„ í•„í„°ë§
- âœ… ê²€ìƒ‰ì–´ì™€ ë·° í•„í„° ë™ì‹œ ì ìš©
- âœ… ëŒ€ì†Œë¬¸ì ë¬´ì‹œ ê²€ìƒ‰
- âœ… ë¹ˆ ê²°ê³¼ ì²˜ë¦¬

##### **A-3. eventOverlap í…ŒìŠ¤íŠ¸**
```typescript
describe('isOverlapping', () => {
  it('ë‘ ì´ë²¤íŠ¸ê°€ ê²¹ì¹˜ëŠ” ê²½ìš° trueë¥¼ ë°˜í™˜í•œë‹¤', () => {
    // Arrange: ë‘ ì´ë²¤íŠ¸ ì„¤ì •
    const event1: Event = { /* ... */ };
    const event2: Event = { /* ... */ };
    
    // Act: ê²¹ì¹¨ ê²€ì‚¬
    const result = isOverlapping(event1, event2);
    
    // Assert: ê²°ê³¼ ê²€ì¦
    expect(result).toBe(true);
  });
});
```

**í•µì‹¬ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤:**
- âœ… ì‹œê°„ ê²¹ì¹¨ ê°ì§€
- âœ… ê²½ê³„ê°’ í…ŒìŠ¤íŠ¸ (ì •í™•íˆ ëë‚˜ëŠ” ìˆœê°„ ì‹œì‘)
- âœ… ê²¹ì¹˜ì§€ ì•ŠëŠ” ê²½ìš° ì²˜ë¦¬
- âœ… ë‚ ì§œ í˜•ì‹ ì˜¤ë¥˜ ì²˜ë¦¬

##### **A-4. timeValidation í…ŒìŠ¤íŠ¸**
```typescript
describe('getTimeErrorMessage', () => {
  it('ì‹œì‘ ì‹œê°„ì´ ì¢…ë£Œ ì‹œê°„ë³´ë‹¤ ëŠ¦ì„ ë•Œ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•œë‹¤', () => {
    // Arrange: ì˜ëª»ëœ ì‹œê°„ ì…ë ¥
    const startTime = '14:00';
    const endTime = '13:00';
    
    // Act: ê²€ì¦ í•¨ìˆ˜ í˜¸ì¶œ
    const result = getTimeErrorMessage(startTime, endTime);
    
    // Assert: ì—ëŸ¬ ë©”ì‹œì§€ ë°˜í™˜ ê²€ì¦
    expect(result.startTimeError).toBeTruthy();
  });
});
```

**í•µì‹¬ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤:**
- âœ… ì‹œê°„ ìˆœì„œ ê²€ì¦
- âœ… ë™ì¼ ì‹œê°„ ì²˜ë¦¬
- âœ… ë¹ˆ ê°’ ì²˜ë¦¬
- âœ… ì—ëŸ¬ ë©”ì‹œì§€ ì •í™•ì„±

##### **A-5. notificationUtils í…ŒìŠ¤íŠ¸**
```typescript
describe('getUpcomingEvents', () => {
  it('ì•Œë¦¼ ì‹œê°„ì´ ì •í™•íˆ ë„ë˜í•œ ì´ë²¤íŠ¸ë¥¼ ë°˜í™˜í•œë‹¤', () => {
    // Arrange: í…ŒìŠ¤íŠ¸ ë°ì´í„° ì¤€ë¹„
    const events: Event[] = [/* ... */];
    const now = new Date('2023-05-10T09:50:00');
    const notifiedEvents: string[] = [];
    
    // Act: ì—…ì»¤ë° ì´ë²¤íŠ¸ ì¡°íšŒ
    const upcomingEvents = getUpcomingEvents(events, now, notifiedEvents);
    
    // Assert: ê²°ê³¼ ê²€ì¦
    expect(upcomingEvents).toHaveLength(1);
    expect(upcomingEvents[0].title).toBe('ì´ë²¤íŠ¸ 1');
  });
});
```

**í•µì‹¬ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤:**
- âœ… ì •í™•í•œ ì•Œë¦¼ ì‹œê°„ ê°ì§€
- âœ… ì¤‘ë³µ ì•Œë¦¼ ë°©ì§€
- âœ… ê³¼ê±°/ë¯¸ë˜ ì´ë²¤íŠ¸ í•„í„°ë§

---

#### **B. Hook í…ŒìŠ¤íŠ¸ - Given-When-Then íŒ¨í„´ ì‚¬ìš©**

Hook í…ŒìŠ¤íŠ¸ëŠ” **Given-When-Then íŒ¨í„´**ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

##### **B-1. useCalendarView í…ŒìŠ¤íŠ¸**
```typescript
describe('ì´ˆê¸° ìƒíƒœ', () => {
  it('viewëŠ” "month"ì´ì–´ì•¼ í•œë‹¤', () => {
    const { result } = renderHook(() => useCalendarView());
    expect(result.current.view).toBe('month');
  });
});
```

**í•µì‹¬ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤:**
- âœ… ì´ˆê¸° ìƒíƒœ ê²€ì¦
- âœ… ë·° ë³€ê²½
- âœ… ë‚ ì§œ ë„¤ë¹„ê²Œì´ì…˜ (ì´ì „/ë‹¤ìŒ)
- âœ… ì£¼ê°„/ì›”ê°„ë³„ ë„¤ë¹„ê²Œì´ì…˜ ì°¨ì´
- âœ… íœ´ì¼ ë°ì´í„° ë¡œë”©

##### **B-2. useSearch í…ŒìŠ¤íŠ¸**
```typescript
it('ê²€ìƒ‰ì–´ê°€ ë¹„ì–´ìˆì„ ë•Œ ëª¨ë“  ì´ë²¤íŠ¸ë¥¼ ë°˜í™˜í•´ì•¼ í•œë‹¤', () => {
  const { result } = renderHook(() => useSearch(mockEvents, currentDate, view));
  expect(result.current.filteredEvents).toEqual(mockEvents);
});
```

**í•µì‹¬ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤:**
- âœ… ë¹ˆ ê²€ìƒ‰ì–´ ì²˜ë¦¬
- âœ… ê²€ìƒ‰ì–´ í•„í„°ë§
- âœ… ë‹¤ì¤‘ í•„ë“œ ê²€ìƒ‰ (ì œëª©/ì„¤ëª…/ìœ„ì¹˜)
- âœ… ì‹¤ì‹œê°„ ê²€ìƒ‰ ì—…ë°ì´íŠ¸
- âœ… ë·°ë³„ í•„í„°ë§ ì¡°í•©

##### **B-3. useEventOperations í…ŒìŠ¤íŠ¸**
```typescript
it('ì •ì˜ëœ ì´ë²¤íŠ¸ ì •ë³´ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì ì ˆí•˜ê²Œ ì €ì¥ì´ ëœë‹¤', async () => {
  setupMockHandlerCreation();
  const { result } = renderHook(() => useEventOperations(false));
  
  await act(async () => {
    await result.current.saveEvent(newEvent);
  });
  
  expect(result.current.events).toEqual([{ ...newEvent, id: '1' }]);
});
```

**í•µì‹¬ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤:**
- âœ… ì¼ì • ìƒì„± (POST)
- âœ… ì¼ì • ìˆ˜ì • (PUT)
- âœ… ì¼ì • ì‚­ì œ (DELETE)
- âœ… ì´ˆê¸° ë¡œë”©
- âœ… ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ ì²˜ë¦¬
- âœ… í† ìŠ¤íŠ¸ ë©”ì‹œì§€ ê²€ì¦

**MSW ëª¨í‚¹ íŒ¨í„´:**
```typescript
setupMockHandlerCreation(); // ìƒˆ ì´ë²¤íŠ¸ ìƒì„± í•¸ë“¤ëŸ¬ ì„¤ì •
setupMockHandlerUpdating(); // ì´ë²¤íŠ¸ ìˆ˜ì • í•¸ë“¤ëŸ¬ ì„¤ì •
setupMockHandlerDeletion(); // ì´ë²¤íŠ¸ ì‚­ì œ í•¸ë“¤ëŸ¬ ì„¤ì •
```

##### **B-4. useNotifications í…ŒìŠ¤íŠ¸**
```typescript
it('ì§€ì •ëœ ì‹œê°„ì´ ëœ ê²½ìš° ì•Œë¦¼ì´ ìƒˆë¡­ê²Œ ìƒì„±ë˜ì–´ ì¶”ê°€ëœë‹¤', () => {
  vi.setSystemTime(new Date(Date.now() + notificationTime * ë¶„));
  
  act(() => {
    vi.advanceTimersByTime(1000);
  });
  
  expect(result.current.notifications).toHaveLength(1);
});
```

**í•µì‹¬ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤:**
- âœ… ì•Œë¦¼ íƒ€ì´ë° ê°ì§€
- âœ… ì¤‘ë³µ ì•Œë¦¼ ë°©ì§€
- âœ… ì•Œë¦¼ ë©”ì‹œì§€ ë‚´ìš©
- âœ… ì•Œë¦¼ ì œê±° ê¸°ëŠ¥

**íƒ€ì´ë¨¸ ëª¨í‚¹:**
```typescript
vi.useFakeTimers();
vi.setSystemTime(new Date('2025-10-15 08:49:59'));
act(() => { vi.advanceTimersByTime(1000); });
```

---

#### **C. í†µí•© í…ŒìŠ¤íŠ¸**

##### **C-1. App í†µí•© í…ŒìŠ¤íŠ¸**

```typescript
describe('ì¼ì • CRUD ë° ê¸°ë³¸ ê¸°ëŠ¥', () => {
  it('ì…ë ¥í•œ ìƒˆë¡œìš´ ì¼ì • ì •ë³´ì— ë§ì¶° ëª¨ë“  í•„ë“œê°€ ì´ë²¤íŠ¸ ë¦¬ìŠ¤íŠ¸ì— ì •í™•íˆ ì €ì¥ëœë‹¤.', async () => {
    const { user } = setup(<App />);
    await saveSchedule(user, { /* ... */ });
    
    const eventList = within(screen.getByTestId('event-list'));
    expect(eventList.getByText('ìƒˆ íšŒì˜')).toBeInTheDocument();
  });
});
```

**í•µì‹¬ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤:**

1. **ì¼ì • CRUD**
   - âœ… ì¼ì • ìƒì„± (ëª¨ë“  í•„ë“œ ê²€ì¦)
   - âœ… ì¼ì • ìˆ˜ì •
   - âœ… ì¼ì • ì‚­ì œ
   - âœ… ì‚­ì œ í›„ ì¡°íšŒ ë¶ˆê°€ í™•ì¸

2. **ë·° ê¸°ëŠ¥**
   - âœ… ì£¼ê°„ ë·° ì „í™˜ ë° ì¼ì • í‘œì‹œ
   - âœ… ì›”ê°„ ë·° ì „í™˜ ë° ì¼ì • í‘œì‹œ
   - âœ… ë·°ë³„ ë¹ˆ ìƒíƒœ ì²˜ë¦¬
   - âœ… ë‚ ì§œ ë„¤ë¹„ê²Œì´ì…˜

3. **ê²€ìƒ‰ ê¸°ëŠ¥**
   - âœ… ê²€ìƒ‰ì–´ ì…ë ¥ ë° í•„í„°ë§
   - âœ… ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ ì²˜ë¦¬
   - âœ… ê²€ìƒ‰ì–´ ì´ˆê¸°í™”

4. **ì¼ì • ì¶©ëŒ ê°ì§€**
   - âœ… ê²¹ì¹˜ëŠ” ì‹œê°„ ê²½ê³  í‘œì‹œ
   - âœ… ì¶©ëŒ ê²½ê³  ë‹¤ì´ì–¼ë¡œê·¸
   - âœ… ìˆ˜ì • ì‹œ ì¶©ëŒ ê°ì§€

5. **ì•Œë¦¼ ê¸°ëŠ¥**
   - âœ… ì•Œë¦¼ ì‹œê°„ ê°ì§€
   - âœ… ì•Œë¦¼ ë©”ì‹œì§€ í‘œì‹œ
   - âœ… ì•Œë¦¼ ì•„ì´ì½˜ ë° ê°•ì¡°

6. **ê³µíœ´ì¼ í‘œì‹œ**
   - âœ… íœ´ì¼ ë ˆì´ë¸” í‘œì‹œ
   - âœ… ê²€ì¦ (1ì›” 1ì¼ = ì‹ ì •)

---

## 3. MSW (Mock Service Worker) ì‚¬ìš© ê·œì¹™

#### **ì„¤ì •**
```typescript
import { server } from '../../setupTests';
import { http, HttpResponse } from 'msw';

beforeEach(() => {
  server.use(
    http.get('/api/events', () => {
      return HttpResponse.json({ events: mockEvents });
    })
  );
});

afterEach(() => {
  server.resetHandlers();
});
```

#### **í•¸ë“¤ëŸ¬ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜**
```typescript
// ìƒˆ ì´ë²¤íŠ¸ ìƒì„±
setupMockHandlerCreation([mockEvents]);

// ì´ë²¤íŠ¸ ìˆ˜ì •
setupMockHandlerUpdating();

// ì´ë²¤íŠ¸ ì‚­ì œ
setupMockHandlerDeletion();
```

#### **ì—ëŸ¬ ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸**
```typescript
it('ì´ë²¤íŠ¸ ë¡œë”© ì‹¤íŒ¨ ì‹œ ì—ëŸ¬ í† ìŠ¤íŠ¸ê°€ í‘œì‹œë˜ì–´ì•¼ í•œë‹¤', async () => {
  server.use(
    http.get('/api/events', () => {
      return new HttpResponse(null, { status: 500 });
    })
  );
  
  renderHook(() => useEventOperations(true));
  await act(() => Promise.resolve(null));
  
  expect(enqueueSnackbarFn).toHaveBeenCalledWith('ì´ë²¤íŠ¸ ë¡œë”© ì‹¤íŒ¨', { variant: 'error' });
});
```

---

## 4. í…ŒìŠ¤íŠ¸ ì‘ì„± ì²´í¬ë¦¬ìŠ¤íŠ¸

#### **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± ì²´í¬ë¦¬ìŠ¤íŠ¸**
- [ ] í•¨ìˆ˜ëª…ê³¼ ëª©ì ì´ ëª…í™•í•œì§€?
- [ ] AAA ë˜ëŠ” Given-When-Then êµ¬ì¡°ë¥¼ ë”°ë¥´ëŠ”ê°€?
- [ ] ê²½ê³„ê°’ í…ŒìŠ¤íŠ¸ë¥¼ í¬í•¨í•˜ëŠ”ê°€?
- [ ] ì—ëŸ¬ ì¼€ì´ìŠ¤ë¥¼ í…ŒìŠ¤íŠ¸í•˜ëŠ”ê°€?
- [ ] ì˜ˆì™¸ ìƒí™©ì„ ë‹¤ë£¨ëŠ”ê°€?

#### **Hook í…ŒìŠ¤íŠ¸ ì‘ì„± ì²´í¬ë¦¬ìŠ¤íŠ¸**
- [ ] ì´ˆê¸° ìƒíƒœë¥¼ ê²€ì¦í•˜ëŠ”ê°€?
- [ ] ëª¨ë“  ìƒíƒœ ë³€ê²½ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ”ê°€?
- [ ] ë¹„ë™ê¸° ì‘ì—…ì„ await ì²˜ë¦¬í•˜ëŠ”ê°€?
- [ ] act()ë¡œ ìƒíƒœ ì—…ë°ì´íŠ¸ë¥¼ ê°ì‹¸ëŠ”ê°€?
- [ ] MSW í•¸ë“¤ëŸ¬ë¥¼ ì˜¬ë°”ë¥´ê²Œ ì„¤ì •í–ˆëŠ”ê°€?

#### **í†µí•© í…ŒìŠ¤íŠ¸ ì‘ì„± ì²´í¬ë¦¬ìŠ¤íŠ¸**
- [ ] ì‹¤ì œ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì‹œë®¬ë ˆì´ì…˜í•˜ëŠ”ê°€?
- [ ] userEventë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ì ë™ì‘ì„ í‰ë‚´ë‚´ëŠ”ê°€?
- [ ] screen.getByRole ë“± ì ‘ê·¼ì„± ê¸°ì¤€ ì„ íƒìë¥¼ ì‚¬ìš©í•˜ëŠ”ê°€?
- [ ] ëª¨ë“  UI ìƒí˜¸ì‘ìš©ì„ ê²€ì¦í•˜ëŠ”ê°€?
- [ ] ì—ëŸ¬ ë° ì˜ˆì™¸ ìƒí™©ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ”ê°€?

---

## 5. ìì£¼ ì‚¬ìš©í•˜ëŠ” í…ŒìŠ¤íŠ¸ íŒ¨í„´

#### **íŒ¨í„´ 1: AAA íŒ¨í„´ (ìˆœìˆ˜ í•¨ìˆ˜ í…ŒìŠ¤íŠ¸)**
```typescript
it('ì‹œì‘ ì‹œê°„ì´ ì¢…ë£Œ ì‹œê°„ë³´ë‹¤ ëŠ¦ì„ ë•Œ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•œë‹¤', () => {
  // Arrange: ì…ë ¥ ì¤€ë¹„
  const result = getTimeErrorMessage('14:00', '13:00');
  
  // Act: (í•¨ìˆ˜ í˜¸ì¶œì€ ì´ë¯¸ í¬í•¨ë¨)
  
  // Assert: ê²°ê³¼ ê²€ì¦
  expect(result.startTimeError).toBeTruthy();
});
```

#### **íŒ¨í„´ 2: Given-When-Then íŒ¨í„´ (Hooks í…ŒìŠ¤íŠ¸)**
```typescript
it('ê²€ìƒ‰ì–´ì— ë§ëŠ” ì´ë²¤íŠ¸ë§Œ í•„í„°ë§í•´ì•¼ í•œë‹¤', () => {
  // Given: ì´ˆê¸° ë°ì´í„°
  const mockEvents: Event[] = [/* ... */];
  const { result } = renderHook(() => useSearch(mockEvents, currentDate, view));
  
  // When: ìƒíƒœ ë³€ê²½
  act(() => {
    result.current.setSearchTerm('íšŒì˜');
  });
  
  // Then: ê²€ì¦
  expect(result.current.filteredEvents).toHaveLength(1);
});
```

#### **íŒ¨í„´ 3: renderHook í™œìš©**
```typescript
const { result } = renderHook(() => useHook());

expect(result.current.property).toBe(expected);
```

#### **íŒ¨í„´ 4: ë¹„ë™ê¸° ì²˜ë¦¬**
```typescript
await act(async () => {
  await result.current.asyncFunction();
});

expect(result.current.data).toBe(expected);
```

#### **íŒ¨í„´ 5: ë‚ ì§œ ëª¨í‚¹**
```typescript
vi.useFakeTimers();
vi.setSystemTime(new Date('2025-10-01'));

// ... í…ŒìŠ¤íŠ¸ ì½”ë“œ ...

act(() => {
  vi.advanceTimersByTime(1000);
});
```

#### **íŒ¨í„´ 6: MSW ì—ëŸ¬ ì²˜ë¦¬**
```typescript
server.use(
  http.post('/api/events', () => {
    return new HttpResponse(null, { status: 500 });
  })
);
```

#### **íŒ¨í„´ 7: within()ìœ¼ë¡œ ë²”ìœ„ ì¢íˆê¸°**
```typescript
const eventList = within(screen.getByTestId('event-list'));
expect(eventList.getByText('ì´ë²¤íŠ¸')).toBeInTheDocument();
```

---

## 6. í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ëª©í‘œ

- **Unit Tests (Utils)**: 100% ì»¤ë²„ë¦¬ì§€ ëª©í‘œ
- **Hook Tests**: í•µì‹¬ ë¡œì§ 100%, ì—£ì§€ ì¼€ì´ìŠ¤ 80%
- **Integration Tests**: ì£¼ìš” ì‚¬ìš©ì í”Œë¡œìš° 100%

---

## 7. ì‹¤í–‰ ëª…ë ¹ì–´

```bash
# ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰
pnpm test

# UIë¡œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
pnpm test:ui

# ì»¤ë²„ë¦¬ì§€ í™•ì¸
pnpm test:coverage
```

---

## 8. ì°¸ê³  ìë£Œ

- **Vitest ê³µì‹ ë¬¸ì„œ**: https://vitest.dev/
- **React Testing Library**: https://testing-library.com/react
- **MSW**: https://mswjs.io/
- **Testing Best Practices**: https://kentcdodds.com/blog/common-mistakes-with-react-testing-library

---

## 9. í…ŒìŠ¤íŠ¸ ì‘ì„± ê°€ì´ë“œ

### 9.1 ìƒˆ ê¸°ëŠ¥ ì¶”ê°€ ì‹œ í…ŒìŠ¤íŠ¸ ì‘ì„± ì ˆì°¨

1. **ê¸°ëŠ¥ ì •ì˜**: ì–´ë–¤ ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸í• ì§€ ëª…í™•íˆ ì •ì˜
2. **í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‘ì„±**: ëª¨ë“  ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ë‚˜ì—´
3. **í…ŒìŠ¤íŠ¸ ìœ í˜• ê²°ì •**: ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ì¸ì§€, Hookì¸ì§€, í†µí•© í…ŒìŠ¤íŠ¸ì¸ì§€ í™•ì¸
4. **íŒ¨í„´ ì„ íƒ**: 
   - ìˆœìˆ˜ í•¨ìˆ˜ â†’ **AAA íŒ¨í„´** (Arrange-Act-Assert)
   - Hooks/ë¹„ë™ê¸° â†’ **Given-When-Then íŒ¨í„´**
5. **í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±**: ì„ íƒí•œ íŒ¨í„´ì— ë”°ë¼ ì‘ì„±
6. **ì‹¤ì œ êµ¬í˜„**: í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•˜ë„ë¡ ì½”ë“œ êµ¬í˜„
7. **ë¦¬íŒ©í† ë§**: ì½”ë“œ í’ˆì§ˆ í–¥ìƒ

### 9.2 í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í•˜ëŠ” ê²½ìš°

1. **ì›ì¸ íŒŒì•…**: ì–´ë–¤ í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í•˜ëŠ”ì§€ í™•ì¸
2. **ì—ëŸ¬ ë©”ì‹œì§€ ë¶„ì„**: ì½˜ì†” ë¡œê·¸ í™•ì¸
3. **ë°ì´í„° í™•ì¸**: Mock ë°ì´í„°ê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸
4. **íƒ€ì´ë° ì´ìŠˆ**: ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ì œëŒ€ë¡œ ë˜ì—ˆëŠ”ì§€ í™•ì¸
5. **cleanup**: beforeEach/afterEachê°€ ì œëŒ€ë¡œ ì‹¤í–‰ë˜ëŠ”ì§€ í™•ì¸

