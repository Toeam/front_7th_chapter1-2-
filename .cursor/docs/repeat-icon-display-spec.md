# 반복 일정 아이콘 표시 명세서 (단일 일정 전제)

## 📋 개요
- 캘린더의 월/주/일 뷰에서 반복 일정 여부를 시각적으로 구분하기 위해 반복 아이콘을 이벤트 제목 앞에 표시한다.
- 모든 일정은 단일 일정이며, 다중일/종일(all-day) 관련 고려사항은 제외한다.

## 🎯 요구사항
### 기능 요구사항
- [ ] 월/주/일 모든 뷰에서 반복 일정에 아이콘을 표시한다.
- [ ] 반복 일정 판단 기준: 이벤트 객체의 `repeat` 값이 존재하면 반복 일정으로 간주한다.
- [ ] 아이콘: `Repeat` 아이콘(`import RepeatIcon from '@mui/icons-material/Repeat'`)을 사용하며, 크기 14px, 이벤트 제목 앞에 배치, 색상은 이벤트 텍스트 색상 상속.
- [ ] 같은 날 여러 일정이 있을 경우 시작 시간이 빠른 순으로 정렬해 표시한다.
- [ ] 반복 시리즈 내 단일 인스턴스가 독립 수정/삭제되었더라도 “시리즈 소속”이면 아이콘을 표시한다.
- [ ] 아이콘은 캘린더 내부 이벤트 타일에서만 표시한다.

### 비기능 요구사항
- 성능: 반복 판정은 `repeat` 존재 여부 확인(O(1)); 날짜별 정렬은 기존 복잡도 유지.
- 접근성: 아이콘에 `aria-label="반복 일정"`을 적용한다.
- 사용성: 월/주/일 뷰 사이에서 일관된 위치/크기/색상을 유지한다.

## 📊 입력값 및 예시
### 입력
```typescript
// 이벤트 타입(예시)
export type CalendarEvent = {
  id: string;
  title: string;
  start: string; // ISO: '2025-10-30T09:00:00'
  end: string;   // ISO: 같은 날 내 종료
  color?: string; // 텍스트/아이콘 상속 기준
  // 반복 여부 판단 기준
  repeat?: {
    type: 'daily' | 'weekly' | 'monthly' | 'yearly' | 'custom';
    [key: string]: unknown;
  };
  // 반복 시리즈 식별을 위한 seriesId가 있을 수 있음
  seriesId?: string;
  // 단일 인스턴스 변형 여부 flag
  isExceptionInstance?: boolean;
};
```

### 출력(렌더 기대)
```typescript
// 같은 날짜 내 시작 시간 오름차순 정렬 후 렌더 기대
[
  { id: 'a', title: '회의', start: '2025-10-30T09:00:00', repeat: { type: 'weekly' } }, // [RepeatIcon 14px] 회의
  { id: 'b', title: '점심', start: '2025-10-30T12:00:00' }                               // 점심
]
```

## 🔗 영향받는 부분
- 영향받는 컴포넌트/훅
  - `src/App.tsx`: 캘린더 뷰 이벤트 타일 렌더링 위치에 아이콘 삽입 및 `RepeatIcon` import 추가
  - `src/hooks/useCalendarView.ts`: 일/주/월 뷰별 이벤트 매핑 시 같은 날 시작 시간 오름차순 정렬 보장
- 유틸/타입
  - `src/utils/eventUtils.ts`: 동일 날짜 내 이벤트 정렬 유틸 존재 시 재사용 또는 확인
  - `src/types.ts`: `repeat` 필드 타입 구조 확인/보강(필요 시)

## ✅ 체크리스트
- [ ] 월/주/일 뷰에서 `repeat` 존재 시 반복 아이콘(14px) 제목 앞 표시
- [ ] 아이콘 색상은 이벤트 텍스트 색상 상속
- [ ] 같은 날 이벤트는 시작 시간 오름차순 정렬
- [ ] 예외 인스턴스라도 시리즈 소속이면 아이콘 유지
- [ ] 아이콘은 캘린더 내부 이벤트 타일에서만 표시
- [ ] 접근성: `aria-label="반복 일정"` 적용

## 🧪 테스트해야 할 케이스(예시)
- [ ] `repeat` 존재 시 아이콘이 제목 앞에 표시됨
- [ ] `repeat` 없음 시 아이콘이 표시되지 않음
- [ ] 같은 날 3개 이벤트: 09:00, 10:00, 11:00 순으로 정렬됨
- [ ] 월/주/일 뷰 전환 시 표시/정렬 규칙 일관성 유지
- [ ] 아이콘 접근성 속성(`aria-label`) 존재

## 시나리오 예시
- 월 뷰에서 10월 30일에 아래 이벤트 존재:
  - A: 09:00-10:00, `repeat` 있음 → 제목 앞 14px 아이콘 표시
  - B: 10:00-10:30, `repeat` 있음, `isExceptionInstance: true`, `seriesId: 's1'` → 아이콘 표시
  - C: 11:00-11:30, `repeat` 없음 → 아이콘 없음
  - 렌더 순서: A(09:00) → B(10:00) → C(11:00)

- 주/일 뷰에서도 동일한 기준으로 표시 및 정렬

## ✅ 최종 확인 사항
- [ ] 모든 입력값이 구체적인가?
- [ ] 예상 결과가 명확한가?
- [ ] 영향받는 부분을 모두 나열했는가?
- [ ] 체크리스트가 완성되었는가?
- [ ] 다른 개발자가 이해할 수 있는가?
