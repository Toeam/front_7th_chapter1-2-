# 반복 일정 아이콘 표시 테스트 설계 (월/주 뷰)

## 🎯 테스트 목표
- 월/주 뷰에서 `repeat` 존재 시 이벤트 제목 앞에 14px `RepeatIcon`이 표시되는지 검증한다.
- 같은 날 여러 일정이 있을 때 시작 시간 오름차순 정렬을 검증한다.
- 아이콘 접근성(`aria-label="반복 일정"`)을 검증한다.
- 아이콘은 캘린더 내부 이벤트 타일에서만 표시됨을 검증한다.

## 📦 테스트 범위
- 통합 테스트: `src/__tests__/medium.repeat.integration.spec.tsx`에 신규 시나리오 추가 설계
- 훅 테스트: `src/__tests__/hooks`의 캘린더 뷰 관련 훅에서 정렬 보장 검증(필요 시)
- 단위 테스트: 정렬 유틸이 있을 경우 해당 유틸에 대한 정렬 검증(있다면 재사용)

## 🧪 테스트 케이스
### 1) 반복 아이콘 표시 여부
- Given: 같은 날짜에 `repeat`가 있는 이벤트 A(09:00)와 없는 이벤트 B(11:00)
- When: 월 뷰 렌더
- Then:
  - A의 제목 앞에 `RepeatIcon`(14px)이 표시되고 `aria-label="반복 일정"`이 존재한다
  - B에는 아이콘이 표시되지 않는다

### 2) 정렬: 시작 시간 오름차순
- Given: 같은 날짜에 A(09:00, repeat 없음), B(11:00, repeat 있음), C(10:00, repeat 있음)
- When: 월/주 뷰 각각 렌더
- Then: 표시 순서가 A(09:00) → C(10:00) → B(11:00) 이다
- And: C와 B에는 아이콘이 있고, A에는 없다

### 3) 예외 인스턴스도 시리즈 소속이면 아이콘 유지
- Given: C(10:00)가 `isExceptionInstance: true`, `seriesId: 's1'`, `repeat` 존재
- When: 렌더
- Then: C는 제목 앞 아이콘을 유지한다

### 4) 뷰 전환 일관성
- Given: 동일한 데이터셋으로 월 → 주 뷰 전환
- Then: 각 뷰에서 같은 이벤트는 동일한 아이콘 표시/정렬 규칙을 따른다

### 5) 접근성 검증
- Given: `repeat`가 있는 이벤트
- Then: 해당 아이콘 요소에 `aria-label="반복 일정"`이 설정되어 있다

## 🔧 구현 힌트(테스트 관점)
- 테스트 식별자: 이벤트 타일 내에서 제목 텍스트 노드 기준으로 아이콘 존재를 탐지하거나, 아이콘에 `aria-label`로 접근
- 정렬 검증: 타일 목록의 텍스트 순서를 `screen.getAllByTestId('event-item')` 또는 컨테이너 내 순회로 비교(프로젝트 내 기존 패턴 준수)
- 데이터 픽스처: `src/__mocks__/response/realEvents.json` 또는 핸들러 유틸 재사용해 날짜/시간/반복 조합을 구성

## ✅ 수용 기준(테스트 통과 기준)
- `repeat` 존재 이벤트마다 제목 앞 14px 아이콘이 보인다(색상은 텍스트 상속, DOM 스타일 체크는 최소화)
- 같은 날 이벤트가 시작 시간 오름차순으로 정렬된다
- 예외 인스턴스라도 시리즈 소속이면 아이콘 표시 유지
- 월/주 뷰에서 동일 규칙 유지
- 아이콘 접근성 속성 존재

## 🧩 비범위(Out of Scope)
- 다중일/종일 일정 처리(현 단계 제외)
- 아이콘 토글/필터
- 상세 패널/팝오버 표시
