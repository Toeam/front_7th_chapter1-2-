# 반복 유형 선택 기능 - 테스트 설계

## 목적
반복 일정(매일/매주/매월/매년) 확장/표시 및 예외 규칙(31일/2월29일), 겹침 무시 정책을 검증한다.

## 범위
- 유틸: `getFilteredEvents`가 주/월 범위에서 반복 인스턴스를 올바르게 포함
- UI/통합: 저장 시 반복 일정은 겹침 경고 없이 저장됨, 뷰/리스트 반영

## 테스트 전략
- 패턴: AAA 및 Given-When-Then 병행
- 단위 테스트: `src/utils/eventUtils.ts` 중심
- 통합 테스트: `src/App.tsx` 흐름(생성 → 표시/겹침 경고)

## 단위 테스트 케이스 (eventUtils)
1) 매일 반복 기본 표시
- Given: 시작일 2025-10-01, repeat: daily
- When: 주/월 필터 호출
- Then: 범위 내 각 날짜에 인스턴스 포함, 종료일 지나면 미포함

2) 매주 반복 요일 고정
- Given: 시작일 2025-10-01(수), repeat: weekly
- Then: 같은 요일에 매주 표시

3) 매월 반복 - 동일 일자 존재하는 달에만 표시
- Given: 시작일 2025-01-31, repeat: monthly
- Then: 2월/4월/6월/9월/11월 등 31일 없는 달에는 미표시(말일 대체 금지)

4) 매년 반복 - 윤년 2월 29일 처리
- Given: 시작일 2024-02-29, repeat: yearly
- Then: 2025/2026/2027에는 미표시, 2028-02-29에 표시

5) 종료일(endDate) 반영
- Given: endDate가 주어진 경우
- Then: endDate 이후 인스턴스는 미포함(해당 날짜 포함 여부는 명세대로 포함)

6) 단일 일정(non-repeating) 기존 회귀
- Given: repeat.type = 'none'
- Then: 기존 필터 동작에 영향 없음

## 통합 테스트 케이스 (App)
7) 반복 일정 저장 시 겹침 경고 무시
- Given: 기존 이벤트와 시간이 겹치는 반복 일정 생성
- When: 저장
- Then: 겹침 경고 다이얼로그가 표시되지 않고 저장 성공 토스트/목록 반영

8) 주/월 뷰에서 반복 인스턴스 노출
- Given: 매주/매월/매년 이벤트 생성
- Then: 해당 범위의 셀들에 인스턴스가 렌더링됨(알림/스타일 포함 회귀 미확대)

## 경계/예외 케이스
- 시작일 자체가 범위 밖일 때, 이후 인스턴스만 포함
- endDate가 시작일 이전/동일인 경우의 처리(표시 범위 포함 규칙 확인)
- 잘못된 날짜 문자열이 들어올 수 없음을 전제(타입/폼에서 제어)

## 파일 배치
- 단위 테스트: 별도 신규 파일 `src/__tests__/unit/medium.repeatUtils.spec.ts`
- 통합 테스트: 별도 신규 파일 `src/__tests__/medium.repeat.integration.spec.tsx`

## 측정 기준
- 주/월 범위 내 인스턴스 수가 기대와 일치
- 특정 날짜 셀에 이벤트 타이틀 렌더링 여부
- 겹침 경고 다이얼로그의 표시 여부

## 추적성
- 요구사항 매핑: FR-1(선택 UI), FR-2(종료일), FR-3(반복 표시), FR-4(겹침 무시), FR-5(31일), FR-6(2/29)
